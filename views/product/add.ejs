<% layout('/pages/index') -%>
<div class="container-fluid">
    <div class="side-body">
        <div class="row">
            <div class="col-xs-12">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <div class="title">ADD

                            </div>
                        </div>
                    </div>
                    <div class="card-body">

                        <div class="form-group">
                            <label for="MFG">MFG</label>
                            <input type="text" class="form-control" id="MFG" placeholder="MFG">
                        </div>
                        <div class="form-group">
                            <label for="EXP">EXP</label>
                            <input type="text" class="form-control" id="EXP" placeholder="EXP">
                        </div>
                        <div class="form-group">
                            <label for="State">State</label>
                            <input type="text" class="form-control" id="State" placeholder="State">
                        </div>
                        <div class="form-group">
                            <label for="Manufacturer">Manufacturer</label>
                            <input type="text" class="form-control" id="Manufacturer" value="" placeholder="Manufacturer">
                        </div>
                        <div class="form-group">
                            <label for="Name">Name</label>
                            <input type="text" class="form-control" id="Name" placeholder="Name">
                        </div>
                        <button type="button" class="btn btn-success" onclick="<%=event%>">Submit</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    async function createProduct() {
        var MFG = $('#MFG').val();
        var EXP = $('#EXP').val();
        var State = $('#State').val();
        var Manufacturer = $('#Manufacturer').val();
        var Name = $('#Name').val();
        var acc = await web3.eth.getAccounts();
        ContractProduct.methods.createProduct(MFG, EXP, State, Manufacturer, Name).send({
            from: acc[0]
        }).then((e) => {
            console.log(e);
            history.go(-1)
        });
    }
    if (basenow.includes('edit')) {
        window.addEventListener('load', function () {
            function getQueryVariable(variable) {
                var query = window.location.search.substring(1);
                var vars = query.split("&");
                for (var i = 0; i < vars.length; i++) {
                    var pair = vars[i].split("=");
                    if (pair[0] == variable) {
                        return pair[1];
                    }
                }
                return (false);
            }
            var a = getQueryVariable("id");

            ContractProduct.methods.productDetail(a).call().then(datas => {
                $('#MFG').val(datas['MFG']);
                $('#EXP').val(datas['EXP']);
                $('#State').val(datas['state']);
                $('#Manufacturer').val(datas['manufacturer']);
                $('#Name').val(datas['name']);
            });
        });
    }
    // // end edit product
</script>