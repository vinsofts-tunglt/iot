<script>
    var dataWarranty = '0x608060405260018054600160a060020a03199081167336c5804a3f063487c0dc09ae93e47fc6f584f1361790915560028054821673f79107d581fcf37369318aaa282aec6c762f77d3179055600a80549091169055600e805461ffff191690553480156200006c57600080fd5b50604051606080620015d683398101806040526200008e9190810190620001a1565b6000805433600160a060020a0319918216811790925560038054600486815567ffffffffffffffff199091166001604060020a0388811691909117604060020a608060020a0319166801000000000000000091871691909102179091556005805490921683179091556002546040517f22c6d29b000000000000000000000000000000000000000000000000000000008152600160a060020a03909116926322c6d29b9262000141923092910162000206565b600060405180830381600087803b1580156200015c57600080fd5b505af115801562000171573d6000803e3d6000fd5b5050505050505062000240565b60006200018c825162000231565b9392505050565b60006200018c825162000234565b600080600060608486031215620001b757600080fd5b6000620001c5868662000193565b9350506020620001d8868287016200017e565b9250506040620001eb8682870162000193565b9150509250925092565b620002008162000225565b82525050565b60408101620002168285620001f5565b6200018c6020830184620001f5565b600160a060020a031690565b90565b6001604060020a031690565b61138680620002506000396000f3006080604052600436106100985763ffffffff7c01000000000000000000000000000000000000000000000000000000006000350416630d9bb52a811461009d578063107a9fc2146100cf5780632e5113b7146100fc57806339461991146101205780633a7ff96414610140578063525191171461016d578063ad5c613d1461018f578063d206098e146101af578063ee8379e5146101d1575b600080fd5b3480156100a957600080fd5b506100b26101f1565b6040516100c698979695949392919061120f565b60405180910390f35b3480156100db57600080fd5b506100ef6100ea366004610ea3565b610351565b6040516100c69190611160565b34801561010857600080fd5b506101116103e3565b6040516100c693929190611138565b34801561012c57600080fd5b506100ef61013b366004610e5f565b6103ff565b34801561014c57600080fd5b5061016061015b366004610e5f565b610685565b6040516100c691906111d2565b34801561017957600080fd5b5061018d610188366004610e5f565b61095c565b005b34801561019b57600080fd5b5061018d6101aa366004610f18565b6109fe565b3480156101bb57600080fd5b506101c4610a87565b6040516100c691906111f3565b3480156101dd57600080fd5b5061018d6101ec366004610f5a565b610ad8565b600380546004546005546006546007546008805460408051602060026101006001861615026000190190941693909304601f810184900484028201840190925281815267ffffffffffffffff808a169a68010000000000000000909a041698600160a060020a0397881697909616959390929091908301828280156102b75780601f1061028c576101008083540402835291602001916102b7565b820191906000526020600020905b81548152906001019060200180831161029a57829003601f168201915b5050505060068301805460408051602060026001851615610100026000190190941693909304601f81018490048402820184019092528181529495949350908301828280156103475780601f1061031c57610100808354040283529160200191610347565b820191906000526020600020905b81548152906001019060200180831161032a57829003601f168201915b5050505050905088565b60008080600160a060020a038816151561036a57600080fd5b61037387610b64565b9150600182858888604051600081526020016040526040516103989493929190611194565b60206040516020810390808403906000865af11580156103bc573d6000803e3d6000fd5b5050604051601f190151600160a060020a0390811699169890981498975050505050505050565b600b54600c54600d54600160a060020a03928316929091169083565b600e546000908190819060ff16801561041f5750600e54610100900460ff165b151561042a57600080fd5b600654600160a060020a03858116911614156105835760055460015460075460405160e260020a631df4cba5028152600160a060020a0393841693909216916377d32e949161047e91600890600401611174565b602060405180830381600087803b15801561049857600080fd5b505af11580156104ac573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506104d09190810190610e85565b600160a060020a0316149150816104e657600080fd5b60015460075460405160e260020a631df4cba5028152600160a060020a038088169316916377d32e94916105209190600990600401611174565b602060405180830381600087803b15801561053a57600080fd5b505af115801561054e573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506105729190810190610e85565b600160a060020a031614925061067e565b600554600160a060020a03858116911614156106795760065460015460075460405160e260020a631df4cba5028152600160a060020a0393841693909216916377d32e94916105d791600990600401611174565b602060405180830381600087803b1580156105f157600080fd5b505af1158015610605573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506106299190810190610e85565b600160a060020a03161490508061063f57600080fd5b60015460075460405160e260020a631df4cba5028152600160a060020a038088169316916377d32e94916105209190600890600401611174565b600092505b5050919050565b606061068f610ba2565b6003546040517f4228724d000000000000000000000000000000000000000000000000000000008152600160a060020a03851691634228724d916106ec9168010000000000000000900467ffffffffffffffff1690600401611201565b600060405180830381600087803b15801561070657600080fd5b505af115801561071a573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526107429190810190610faf565b9050806060015160ff166000148015610766575060035467ffffffffffffffff1642105b15610835576040805160608181018352600554600160a060020a039081168084526006549091166020808501829052600454948601859052600b805473ffffffffffffffffffffffffffffffffffffffff199081169094179055600c8054909316909117909155600d9290925582519081018352602781527f42757965722063616e20776974682064726177206d6f6e65792066726f6d2045918101919091527f6d706c6f79657200000000000000000000000000000000000000000000000000918101919091529150610956565b60035467ffffffffffffffff16421180156108585750605a816060015160ff1610155b1561091f576040805160608181018352600554600160a060020a03168083526020808401829052600454938501849052600b805473ffffffffffffffffffffffffffffffffffffffff199081168417909155600c8054909116909217909155600d9290925582519081018352602a81527f456d706c6f7965722063616e20776974682064726177206d6f6e65792066726f918101919091527f6d20436f6e747261637400000000000000000000000000000000000000000000918101919091529150610956565b60408051808201909152601181527f446f6e7420646f20736f6d657468696e67000000000000000000000000000000602082015291505b50919050565b600054600160a060020a031633146109a9576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016109a0906111e3565b60405180910390fd5b600e5460ff161580156109c45750600e54610100900460ff16155b15156109cf57600080fd5b6006805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055565b600654600160a060020a0316338114610a43576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016109a0906111e3565b600e5460ff161580610a5d5750600e54610100900460ff16155b1515610a6857600080fd5b610a7460098484610be0565b5050600e805460ff191660011790555050565b610a8f610c5e565b600a54600160a060020a03163314610aa657600080fd5b5060408051606081018252600b54600160a060020a039081168252600c54166020820152600d54918101919091525b90565b600054600160a060020a03163314610b1c576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016109a0906111e3565b600e5460ff161580610b365750600e54610100900460ff16155b1515610b4157600080fd5b610b4d60088484610be0565b506007555050600e805461ff001916610100179055565b604080517f19457468657265756d205369676e6564204d6573736167653a0a3332000000008152601c8101839052905190819003603c019020919050565b6040805160e0810182526000808252602082018190529181018290526060808201839052608082019290925260a0810182905260c081019190915290565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10610c215782800160ff19823516178555610c4e565b82800160010185558215610c4e579182015b82811115610c4e578235825591602001919060010190610c33565b50610c5a929150610c7e565b5090565b604080516060810182526000808252602082018190529181019190915290565b610ad591905b80821115610c5a5760008155600101610c84565b6000610ca482356112f2565b9392505050565b6000610ca482516112f2565b6000610ca48235610ad5565b600080601f83018413610cd557600080fd5b50813567ffffffffffffffff811115610ced57600080fd5b602083019150836001820283011115610d0557600080fd5b9250929050565b6000601f82018313610d1d57600080fd5b8151610d30610d2b826112ba565b611293565b91508082526020830160208301858383011115610d4c57600080fd5b610d57838284611316565b50505092915050565b600060e08284031215610d7257600080fd5b610d7c60e0611293565b90506000610d8a8484610e3b565b8252506020610d9b84848301610e3b565b6020830152506040610daf84828501610e3b565b6040830152506060610dc384828501610e53565b6060830152506080610dd784828501610e3b565b60808301525060a082015167ffffffffffffffff811115610df757600080fd5b610e0384828501610d0c565b60a08301525060c082015167ffffffffffffffff811115610e2357600080fd5b610e2f84828501610d0c565b60c08301525092915050565b6000610ca48251611303565b6000610ca48235611310565b6000610ca48251611310565b600060208284031215610e7157600080fd5b6000610e7d8484610c98565b949350505050565b600060208284031215610e9757600080fd5b6000610e7d8484610cab565b600080600080600060a08688031215610ebb57600080fd5b6000610ec78888610c98565b9550506020610ed888828901610cb7565b9450506040610ee988828901610cb7565b9350506060610efa88828901610cb7565b9250506080610f0b88828901610e47565b9150509295509295909350565b60008060208385031215610f2b57600080fd5b823567ffffffffffffffff811115610f4257600080fd5b610f4e85828601610cc3565b92509250509250929050565b600080600060408486031215610f6f57600080fd5b833567ffffffffffffffff811115610f8657600080fd5b610f9286828701610cc3565b93509350506020610fa586828701610cb7565b9150509250925092565b600060208284031215610fc157600080fd5b815167ffffffffffffffff811115610fd857600080fd5b610e7d84828501610d60565b610fed816112f2565b82525050565b610fed816112fe565b610fed81610ad5565b6000611010826112ee565b808452611024816020860160208601611316565b61102d81611342565b9093016020019392505050565b6000815460018116600081146110575760018114611075576110b1565b60028204607f16855260ff19821660208601526040850192506110b1565b6002820480865260208601955061108b856112e2565b60005b828110156110aa5781548882015260019091019060200161108e565b8701945050505b505092915050565b601181527f5065726d697373696f6e2064656e696564000000000000000000000000000000602082015260400190565b805160608301906110fa8482610fe4565b50602082015161110d6020850182610fe4565b5060408201516111206040850182610ffc565b50505050565b610fed81611303565b610fed81611310565b606081016111468286610fe4565b6111536020830185610fe4565b610e7d6040830184610ffc565b6020810161116e8284610ff3565b92915050565b604081016111828285610ffc565b8181036020830152610e7d818461103a565b608081016111a28287610ffc565b6111af602083018661112f565b6111bc6040830185610ffc565b6111c96060830184610ffc565b95945050505050565b60208082528101610ca48184611005565b6020808252810161116e816110b9565b6060810161116e82846110e9565b6020810161116e8284611126565b610100810161121e828b611126565b61122b602083018a611126565b6112386040830189610ffc565b6112456060830188610fe4565b6112526080830187610fe4565b61125f60a0830186610ffc565b81810360c08301526112718185611005565b905081810360e08301526112858184611005565b9a9950505050505050505050565b60405181810167ffffffffffffffff811182821017156112b257600080fd5b604052919050565b600067ffffffffffffffff8211156112d157600080fd5b506020601f91909101601f19160190565b60009081526020902090565b5190565b600160a060020a031690565b151590565b67ffffffffffffffff1690565b60ff1690565b60005b83811015611331578181015183820152602001611319565b838111156111205750506000910152565b601f01601f1916905600a265627a7a72305820406e1e4f4f727d71a7c368935e09dcb4a40a657677daf8b28e3e329323ef75e26c6578706572696d656e74616cf50037'
    async function btnSubmit() {

        var idProduct = parseInt($("#idProduct").val());
        var compensation = parseInt($("#compensation").val());
        var expireTime = parseInt($("#expireTime").val());
        if (confirm("Bạn có đồng ý tạo Hợp đồng mới")) {
        var acc = await accf();
        var Mycontract = ContractWarrantyabi.deploy({
            data: dataWarranty,
            arguments: [expireTime, compensation, idProduct]
        })
        Mycontract.send({
            from: acc,
            gasPrice: gasPrice,
            gasLimit: gasLimit
            })
            .on('transactionHash', function (transactionHash) {
            console.log('transactionHash', transactionHash)
            })
            .then(async function (newContractInstance) {
            var ads = newContractInstance.options.address;
            console.log(ads)
            history.go(-1)
            });
        }
    }

    accf().then(acc=>{
        ContractProduct.methods.getAll().call({
            from: acc
        }).then(datas => {
            datas.forEach(async (v, k) => {
                if(v["id"]!=0){
                $("#idProduct").append(`<option value="${v["id"]}">${v["id"]} - ${v["name"]}</option>`)
                }
            })
        });
    });
        
</script>